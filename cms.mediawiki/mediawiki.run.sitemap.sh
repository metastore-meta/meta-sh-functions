#!/usr/bin/env bash

# -------------------------------------------------------------------------------------------------------------------- #
# MediaWiki. Sitemap Generation.
# -------------------------------------------------------------------------------------------------------------------- #
# @author Kitsune Solar <https://kitsune.solar>
# @version 1.0.0
# -------------------------------------------------------------------------------------------------------------------- #

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Settings.
# -------------------------------------------------------------------------------------------------------------------- #

source "${HOME}/.apps/mediawiki.settings.sh"

# -------------------------------------------------------------------------------------------------------------------- #
# -----------------------------------------------------< SCRIPT >----------------------------------------------------- #
# -------------------------------------------------------------------------------------------------------------------- #

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Sitemap Generation.
# -------------------------------------------------------------------------------------------------------------------- #

function mw.run.generateSitemap() {
	for domain in ${domains[@]}; do
		HTTP_HOST="${domain}"
		export HTTP_HOST
		/usr/bin/php "${mw_path}/maintenance/generateSitemap.php"  	\
		--fspath "${mw_path}/ext-sitemap"								\
		--identifier="${domain}"										\
		--urlpath="https://${domain}/ext-sitemap"						\
		--server="https://${domain}"
	done
}

mw.run.generateSitemap

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Exit.
# -------------------------------------------------------------------------------------------------------------------- #

exit 0
